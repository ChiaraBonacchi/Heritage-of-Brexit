


#Set working directory
setwd("~path")

# Require Rfacebook, devtools and xlsx packages. If you have not installed htenm already, run install.packages() first.
require(Rfacebook)
require(devtools)
require(xlsx)

#Download the token from here and save it into your work directory:

https://github.com/IARHeritages/Facebook-codes/blob/master/token

#Load the token
load("token.R")

#Download the pages data from here and save it into your work directory:

https://github.com/IARHeritages/Facebook-codes/blob/master/listPages.R

#Load the data:

load("listPages.R")

#Get the list of ids for a relevant set of pages - set a to a number between 1 and 74.

idsFP <-listPages[[a]]$id

#Set up a list in which to keep the results
my_posts <-c()

#Set up other parameters

np = 100000000
i=1
f=length(idsFP) +1

#start the loop that will go through the list of pages
	
  while (i<f){

 	g <- idsFP[i]
	j <- getPage(page=g, token=token, n=np, feed=TRUE,since='2010/05/06')
 	my_posts[[i]] <-j
 	print (i)

	i=i+1
	}
  
  ### If there is an error with Call API just start the loop agai like this:
  ###Do not reset the parameters (i and my_posts)
  while (i<f){

 	g <- idsFP[i]
	j <- getPage(page=g, token=token, n=np, feed=TRUE,since='2010/05/06')
 	my_posts[[i]] <-j
 	print (i)

	i=i+1
	}
  
  ###If there is an error becuase page id doesn't exist (because e.g. the page has been deleted after it has been downloaded), delete it from the dataset:
  listPages[[a]] <- subset(listPages[[a]], listPages[[a]]$id != "#Enter id that returns the error" )
  
  
  ###After downloading finished, backup save the downloaded posts:
  save(my_posts,file="my_posts(a).R")
  
  ###Change the value of R and download next set of posts
